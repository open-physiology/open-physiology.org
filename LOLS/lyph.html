<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>
<title>Lyphs Documentation</title>

<link rel="stylesheet" href="/Skeleton/stylesheets/base.css">
<link rel="stylesheet" href="/Skeleton/stylesheets/skeleton.css">

<style media='screen' type='text/css'>
#maindiv, #apidiv, #introdiv
{
  background-image: url(http://open-physiology.org/owlkb/swirly.png);
  background-position: center;
  background-size: contain;
  background-repeat: no-repeat;
}
</style>

</head>
<body>

<div class='container'>

  <div class='sixteen columns'>
    <h1 id='topdiv'>Lyphs Documentation</h1>
    <hr>
  </div>

  <div class='twelve columns' id='introdiv'>
    <div id='about'>
      <h2>About</h2>

      <h4>&raquo; <a href='#apidiv'>Quickjump to API section</a></h4>

      <p>
        Lyphs and lyph templates are special data structures developed for ApiNATOMY 2.
        They are intended for automated reasoning about flow
        processes through the body.
      </p>

      <h3>Templates</h3>

      <p>
        There are three types of template:
        <ul>
          <li>
            &raquo; Basic template: A <i>basic</i> template is just a term from a reference ontology
            (typically FMA or CHEBI).
          </li>
          <li>
            &raquo; Mix template: A <i>mix</i> template is an unordered list of <i>layers</i> (layers are
            defined below).
          </li>
          <li>
            &raquo; Shell template: A <i>shell</i> template is an ordered list of layers (defined below).
          </li>
        </ul>
      Every template has an <i>id</i>, used to retrieve the template from the database.
      </p>

      <h3>Layers</h3>
      <p>
        A <i>layer</i> is a template together with a thickness.
        If the layer consists of template X with thickness Y, we intuitively think
        of it as a right hollow cylinder constructed out of X (considered as
        a material), with thickness Y.  A layer's thickness can
        also be ``unspecified''.
      </p>
      <p>
        Every layer has an <i>id</i>, used for retrieval from the database.
      </p>

      <h3>Lyphnodes</h3>
      <p>
        A <i>lyphnode</i> is an entity whose only purpose is to serve as an
        endpoint of a <i>lyph</i> (defined below).  Every lyphnode has an
        <i>id</i>, for retrieval from the database.
      </p>
      <p>
        Every lyphnode also has a list of <i>exits</i> (an <i>exit</i> consists
        of a 'to' destination---which is another lyphnode---and a 'via' lyphedge).
        These <i>exits</i> are not user-defined; rather, they are automatically
        calculated from the lyphs.
      </p>

      <h3>Lyphs</h3>
      <p>
        A <i>lyph</i> consists of a 'from' vertex (which is a lyphnode,
        defined above); a 'to' vertex (also a lyphnode); a 'name' (which, in
        practice, may be a very verbose description of a segment of flow
        in the body); a 'type' (optional, see below); a 'template' (which should be a 'shell'
        type of template); and an 'fma' term.  Only the 'from' and 'to' fields are
        mandatory, the rest may be unspecified.
      </p>
      <p>
        The 'type' of a lyph is one of the following:
        <ul>
          <li>1: arterial segment</li>
          <li>2: microcirculation</li>
          <li>3: venous</li>
          <li>4: cardiac chamber</li>
        </ul>
        If no type is specified, the type defaults to 1.  Type is, currently, a deprecated feature.
      </p>
      <p>
        Every lyph also has an <i>id</i>, for retrieval from the database.
      </p>

      <h3>Lyphviews</h3>
      <p>
        A <i>lyphview</i> is a set of lyphnodes along with x-y-coordinates
        for those lyphnodes, plus a set of 'rectangles' (a 'rectangle' being
        a lyph together with a width, a height, and the x-y-coordinates of
        its upper-left point).  Every lyphview also has an <i>id</i>, for retrieval
        from the database, and (optionally) a <i>name</i>.
      </p>
    </div>

    <div id='apidiv'>
      <h2>API</h2>
      <p>
        The Lyph API consists of commands which the user can send via
        HTTP.  The server sends its responses in JSON.  JSONP is supported.
      </p>

      <h3 id='apicmd_template'>template</h3>

      <p>
        Used to look up a template by its ID.
        <blockquote>
          Example: http://localhost:5052/template/TEMPLATE_1
        </blockquote>
        Note: You can specify a term in a reference ontology in order to retrieve the corresponding <i>basic template</i>.
        <blockquote>
          Example: http://localhost:5052/template/CHEBI_37527
        </blockquote>
      </p>

      <h3 id='apicmd_layer'>layer</h3>
      <p>
        Used to look up a layer by its ID.
        <blockquote>
          Example: http://localhost:5052/layer/LAYER_1
        </blockquote>
      </p>

      <h3 id='apicmd_lyphview'>lyphview</h3>
      <p>
        Used to look up a lyphview by its ID.
        <blockquote>
          Example: http://localhost:5052/lyphview/1
        </blockquote>
      </p>

      <h3 id='apicmd_lyph'>lyph</h3>
      <p>
        Used to look up a lyph by its ID.
        <ul>
          <li>Optional argument: 'annots': set annots=1 if you want to see lyph's annotations.
        </ul>
        <blockquote>
          Example: http://localhost:5052/lyph/6039
        </blockquote>
        <blockquote>
          Example: http://localhost:5052/lyph/6039?annots=1
        </blockquote>
      </p>

      <h3 id='apicmd_lyphnode'>lyphnode</h3>
      <p>
        Used to look up a lyphnode by its ID.
        <blockquote>
          Example: http://localhost:5052/lyphnode/50022150_0
        </blockquote>
      </p>

      <h3 id='apicmd_pubmed'>pubmed</h3>
      <p>
        Used to look up a pubmed entry based on its ID (specified with the 'pubmed' parameter).
        <blockquote>
          Example: http://localhost:5052/pubmed/?pubmed=5000
        </blockquote>
      </p>

      <h3 id='apicmd_clinical_index'>clinical_index</h3>
      <p>
        Used to look up a clinical index based on index (specified with the 'index' parameter).
        <blockquote>
          Example: http://localhost:5052/clinical_index/?index=cooties
        </blockquote>
      </p>

      <h3 id='apicmd_lyphpath'>lyphpath</h3>
      <p>
        Used to compute shortest path(s) through the lyph graph..
        <blockquote>
          Example 1: http://localhost:5052/lyphpath/?from=50022150_0&to=50022153_0
        </blockquote>
        <blockquote>
          Example 2: http://localhost:5052/lyphpath/?fromlyph=6039&tolyph=6032
        </blockquote>
        <blockquote>
          Example 3: http://localhost:5052/lyphpath/?from=50022150_0&tolyph=6032
        </blockquote>
        <blockquote>
          Example 4: http://localhost:5052/lyphpath/?fromlyph=6039&to=50022153_0
        </blockquote>
        'From' or 'Fromlyph' argument:
        <ul>
          <li>&raquo; 'from': specify a lyphnode to search for paths starting at that lyphnode.</li>
          <li>&raquo; 'fromlyph': specify a lyph to search for paths starting at any lyphnode located inside that lyph</li>
          <li>&raquo; Only one of the above arguments should be used.</li>
        </ul>
        'To' or 'Tolyph' argument:
        <ul>
          <li>&raquo; 'to': specify a lyphnode to search for paths ending at that lyphnode.</li>
          <li>&raquo; 'tolyph': specify a lyph to search for paths ending at any lyphnode located in that lyph.</li>
          <li>&raquo; Only one of the above arguments should be used.</li>
        </ul>
        Optional arguments:
        <ul>
          <li>&raquo; filter: specify a filter template, the algorithm will only consider lyphs with templates that are subtemplates of the filter.</li>
          <li>&raquo; include_templateless: specify ('yes' or 'no') whether templateless lyphs should be considered, when performing a filtered search.  Default: no.</li>
          <li>&raquo; numpaths: If you want to find multiple paths, rather than just the shortest one, use 'numpaths' to indicate how many paths you want.  The program will output up to that many paths, from shortest to longest.</li>
        </ul>
      </p>

      <h3 id='apicmd_assign_template'>assign_template</h3>
      <p>
        Used to assign a template to a lyph.
        <blockquote>
          Example: http://localhost:5052/assign_template/?lyph=5000&template=TEMPLATE_5
        </blockquote>
        Will send an error message if the indicated template is inconsistent (not a subtemplate of) any constraints previouly placed on the lyph.
      </p>

      <h3 id='apicmd_template_along_path'>template_along_path</h3>
      <p>
        Used to assign a template to every lyph along a path.
        <blockquote>
          Example: http://localhost:5052/template_along_path/?from=5000&to=6000&template=TEMPLATE_3
        </blockquote>
        Will send an error message (and not assign any templates) if any lyph in the path has constraints preventing this template from being assigned to it.
        <ul><li>Optional arguments: Same as the "lyphpath" command</li></ul>
      </p>

      <h3 id='apicmd_constrain_along_path'>constrain_along_path</h3>
      <p>
        Used to add a constraint to every lyph along a path.
        <blockquote>
          Example: http://localhost:5052/constrain_along_path/?from=5000&to=6000&template=TEMPLATE_3
        </blockquote>
        Will send an error message (and not assign any constraints) if any lyph in the path has a template that already violates the constraint.
        <ul><li>Optional arguments: Same as the "lyphpath" command</li></ul>
      </p>

      <h3 id='apicmd_makelayer'>makelayer</h3>
      <p>
        Used to create a new layer (or, if the specified layer already exists, retrieve it).
        <ul>
          <li>Mandatory argument: material: the materials of the layer (a comma-separated list of template IDs)</li>
          <li>Optional argument: thickness: the thickness of the layer</li>
        </ul>
        <blockquote>
          Example: http://localhost:5052/makelayer/?material=TEMPLATE_1&thickness=5
        </blockquote>
      </p>

      <h3 id='apicmd_maketemplate'>maketemplate</h3>
        Used to create a new template (or, if the specified template already exists, find it).
        <ul>
          <li>
            Mandatory argument: name: a proposed name for the template.
            <ul>
              <li>Note: If a template already exists which matches everything else, then this proposed name will be discarded, in favor of the existing template's name.</li>
            </ul>
          </li>
          <li>
            Mandatory argument: type: mix or shell.
            <ul>
              <li>Note: To create a template of type 'basic', use the 'template' command (above).
            </ul>
          </li>
          <li>Mandatory arguments: layer1: specify layers of the template (by layer id)</li>
          <li>Optional arguments: layer2, layer3, layer4, etc: as above.
          <li>Optional argument: misc_materials: comma-separated list of materials which occur somewhere in this template (when the individual layer where they occur is unknown)</li>
        </ul>
        <blockquote>
          Example: http://localhost:5052/maketemplate/?name=my+template&type=mix&layer1=LAYER_5&layer2=LAYER_77&layer3=LAYER_4
        </blockquote>

      <h3 id='apicmd_makeview'>makeview</h3>
      Used to create a new lyphview (or, if the specified view already exists, retrieve it).
      <ul>
        <li>Optional argument: name: the name of the view</li>
        <li>Optional arguments: node1, node2, node3, ...: The nodes in the lyphview</li>
        <li>Optional arguments: x1, x2, x3, ...: The x-coordinates of the nodes</li>
        <li>Optional arguments: y1, y2, y3, ...: The y-coordinates of the nodes</li>
        <li>
          Optional arguments: lyph1, lyph2, lyph3, ...: The lyphs (rectangles) in the lyphview
          <ul>
            <li>Note: template IDs can also be used, in which case a lyph with that template will be chosen (or created, if none exist yet).</li>
            <li>Optional argument: species: if a lyph is created as in the previous line, it will be created with this indicated species.</li>
          </ul>
        </li>
        <li>
          Optional arguments: lx1, lx2, lx3, ...: The x-coordinates of the lyphs' upper-left points</li>
          <ul>
            <li>(Note, that first character is a lowercase L, as in "lyph")</li>
          </ul>
        </li>
        <li>Optional arguments: ly1, ly2, ly3, ...: The y-coordinates of the lyphs' upper-left points</li>
        <li>Optional arguments: width1, width2, width3, ...: The widths of the lyphs</li>
        <li>Optional arguments: height1, height2, height3, ...: The heights of the lyphs</li>
      </ul>
      Each node must be given an x- and a y-coordinate.
      <blockquote>
        Example: http://localhost:5052/makeview/?node1=500&x1=3&y1=5&node2=9342&x2=0&y2=0&lyph1=6039&lx1=3&ly1=5&width1=12&height1=8
      </blockquote>

      <h3 id='apicmd_makelyphnode'>makelyphnode</h3>
      Used to create a new lyphnode.
      <ul>
        Optional argument: location: the location of the node (specified by a lyph ID).  If this argument is used, 'loctype' must also be used.
        Optional argument: loctype: the loctype of the node.  Can be 'interior' or 'border'.
      </ul>
      <blockquote>
        Example: http://localhost:5052/makelyphnode/?location=6039&loctype=interior
      </blockquote>
      Note: The lyphnode will not actually be saved to disk unless it is used in a lyph or lyphview.

      <h3 id='apicmd_makelyph'>makelyph</h3>
      Used to create a new lyph (or, if such a lyph already exists, retrieve it).
      <ul>
        <li>Optional argument: type: 1, 2, 3, or 4.  The meanings of these numbers are:
          <ul>
            <li>1: arterial segment</li>
            <li>2: microcirculation</li>
            <li>3: venous</li>
            <li>4: cardiac chamber</li>
          </ul>
        </li>
        <li>Optional argument: name: a description of the lyph.</li>
        <li>Mandatory argument: from: the initial node of the lyph (specified via lyphnode ID).</li>
        <li>Mandatory argument: to: the terminal node of the lyph (specified via lyphnode ID).</li>
        <li>Optional argument: template: a template to describe the tube around the edge (specified via template ID).
        <li>Optional argument: fma: an FMA term (specified as a number, e.g., 7197 refers to FMA_7197).</li>
        <li>Optional argument: species: the species of the lyph (curator should use NCBI taxonomy IDs here)</li>
      </ul>
      <blockquote>
        Example: http://localhost:5052/makelyph/?type=1&name=mystery+artery&from=5432&to=57465&template=TEMPLATE_5&fma=7197
      </blockquote>

      <h3 id='apicmd_make_pubmed'>make_pubmed</h3>
      <p>
        Add a pubmed entry, specified its ID ('id') and the title of the paper ('title').
        <blockquote>
          Example: http://localhost:5052/make_pubmed/?id=5000&title=The+Theory+of+Everything
        </blockquote>
      </p>

      <h3 id='apicmd_make_clinical_index'>make_clinical_index</h3>
      <p>
        Add a clinical index entry, specified by its index ('index') and label ('label').
        <blockquote>
          Example: http://localhost:5052/make_clinical_index/?index=cooties&label=The+Dreadful+Cooties+Disease
        </blockquote>
        Optionally, a comma-separated list of pubmed IDs can be specified with the 'pubmeds' parameter.
        <blockquote>
          Example: http://localhost:5052/make_clinical_index/?index=cooties&label=The+Dreadful+Cooties+Disease&pubmeds=123,456,789
        </blockquote>
      </p>

      <h3 id='apicmd_annotate'>annotate</h3>
      <p>
        Add an annotation to a set of lyphs.
        <ul>
          <li>Mandatory argument: lyphs: the lyphs to annotate (as a comma-separated list)</li>
          <li>Mandatory argument: annot: the annotation to annotate the lyphs with (a string)</li>
          <li>Mandatory argument: pubmed: a pubmed ID.</li>
          <li>Optional argument: pred: a predicate, to specify what type of annotation this is.</li>
        </ul>
        <blockquote>
          Example: http://localhost:5052/annotate/?lyphs=6039,6040&pred=mentioned+in+paper&annot=de+Bono+(2018)&pubmed=500</li>
        </blockquote>
      </p>

      <h3 id='apicmd_remove_annotations'>remove_annotations</h3>
      <p>
        Remove an annotation from a set of lyphs.
        <ul>
          <li>Mandatory argument: lyphs: a comma-separated list of lyph IDs to remove the annotation from.</li>
          <li>Mandatory argument: annot: the annotation to remove.</li>
        </ul>
        <blockquote>
          Example: http://localhost:5052/remove_annotations/?lyphs=6039,6040,6041&annot=CLINDEX_244
        </blockquote>
      </p>

      <h3 id='apicmd_editlyph'>editlyph</h3>
      <p>
        Used to edit an existing lyph.
        <ul>
          <li>Mandatory argument: lyph: the ID of the lyph to edit.</li>
          <li>Optional arguments: all the arguments that "makelyph" takes.</li>
        </ul>
      </p>

      <h3 id='apicmd_editlyphnode'>editlyphnode</h3>
      <p>
        Used to edit an existing lyphnode.
        <ul>
          <li>Argument: node: the node you want to edit.</li>
          <li>Argument: location: the location of the lyphnode (specified with a lyph ID).</li>
          <li>Argument: loctype: the loctype of the lyphnode ('interior' or 'border').</li>
        </ul>
        If the node already has a location, then the location argument is optional.
        If the node already has a loctype, then the loctype argument is optional.
        <blockquote>
          Example: http://localhost:5052/editlyphnode/?node=5&location=10&loctype=interior
        </blockquote>
      </p>

      <h3 id='apicmd_edit_template'>edit_template</h3>
      <p>
        Used to edit an existing template.
        <ul>
          <li>Mandatory argument: template: the ID of the template to edit.</li>
          <li>Optional arguments: name, type, ont</li>
          <li>Optional argument: misc_materials: comma-separated list of materials (given by template IDs) which occur somewhere in this template, when it is unclear which layer exactly they occur in.</li>
        </ul>
        <blockquote>
          Example: http://localhost:5052/edit_template?template=TEMPLATE_1&misc_materials=TEMPLATE_2,TEMPLATE_3&name=Renamed!&type=shell
        </blockquote>
      </p>

      <h3 id='apicmd_editview'>editview</h3>
      <p>
        Used to edit an existing lyphview.
        <ul>
          <li>Mandatory argument: view: the ID of the view to edit.</li>
          <li>Optional arguments: name</li>
        </ul>
        (Note: to add/remove nodes, use the nodes_to_view/nodes_from_view commands
        instead.  To add/remove lyphs, use the lyphs_to_view/lyphs_from view commands.)
      </p>

      <h3 id='apicmd_editlayer'>editlayer</h3>
      <p>
        Used to edit an existing layer.
        <ul>
          <li>Mandatory argument: layer: the ID of the layer to edit.</li>
          <li>Optional arguments: material (as comma-separated list), thickness</li>
        </ul>
        <blockquote>
          Example: http://localhost:5052/editlayer/?layer=LAYER_1&material=TEMPLATE_1,TEMPLATE_2&thickness=10
        </blockquote>
      </p>

      <h3 id='apicmd_edit_pubmed'>edit_pubmed</h3>
      <p>
        Edit a pubmed entry (specified with the 'pubmed' parameter).  The only field
        you can edit right now is 'title'.
        <blockquote>
          Example: http://localhost:5052/edit_pubmed/?pubmed=500&title=On+Corrections+of+Paper+Names
        </blockquote>
      </p>

      <h3 id='apicmd_edit_clinical_index'>edit_clinical_index</h3>
      <p>
        Edit a clinical index entry (specified with the 'index' parameter).  Editable fields
        are 'label' and 'pubmeds'.  (The latter is specified as a comma-separated list of pubmed IDs.)
        <blockquote>
          Example: http://localhost:5052/edit_clinical_index/?index=cooties&label=A+Terrible+Disease+called+Cooties
        </blockquote>
        <blockquote>
          Example: http://localhost:5052/edit_clinical_index/?index=cooties&pubmeds=123,456,789
        </blockquote>
      </p>

      <h3 id='apicmd_lyphconstrain'>lyphconstrain</h3>
      <p>Temporarily disabled due to change in layer structure.</p>
      <p>
        Add a constraint to a lyph.  A constraint is a template, and what it does is it restricts which templates can be assigned to the lyph.  To be precise: only subtemplates of the constraint template will be allowed to be assigned to the lyph.
        <blockquote>
          Example: http://localhost:5052/lyphconstrain/?lyph=5000&template=TEMPLATE_5
        </blockquote>
      </p>

      <h3 id='apicmd_delete_lyphs'>delete_lyphs</h3>
      <p>
        Delete some lyphs.  The lyphs are specified via the 'lyphs' parameter, in the
        form of a comma-separated list.
        <blockquote>
          Example: http://localhost:5052/delete_lyphs/?lyphs=5000,6000,7000
        </blockquote>
      </p>

      <h3 id='apicmd_delete_nodes'>delete_nodes</h3>
      <p>
        Delete some nodes.  The nodes are specified via the 'nodes' parameter, in the
        form of a comma-separated list.  Note: any lyphs which have any of these nodes
        as endpoint, will also be deleted.
        <blockquote>
          Example: http://localhost:5052/delete_nodes/?nodes=50,60,70
        </blockquote>
      </p>

      <h3 id='apicmd_delete_templates'>delete_templates</h3>
      <p>
        Delete some templates.  The templates are specified via the 'templates' parameter, in the
        form of a comma-separated list.  Note: any templates/layers which are built-up from
        deleted templates will also be deleted.
        <blockquote>
          Example: http://localhost:5052/delete_templates/?templates=TEMPLATE_5,TEMPLATE_6,TEMPLATE_7
        </blockquote>
      </p>

      <h3 id='apicmd_delete_views'>delete_views</h3>
      <p>
        Delete some views.  The views are specified via the 'views' parameter, in the
        form of a comma-separated list.
        <blockquote>
          Example: http://localhost:5052/delete_views/?views=50,60,70
        </blockquote>
      </p>

      <h3 id='apicmd_delete_layers'>delete_layers</h3>
      <p>
        Delete some layers.  The layers are specified via the 'layers' parameter, in the
        form of a comma-separated list.  Note, any templates/layers built up from deleted
        layers will also be deleted.
        <blockquote>
          Example: http://localhost:5052/delete_layers/?layers=LAYER_1,LAYER_2,LAYER_3
        </blockquote>
      </p>

      <h3 id='nodes_to_view'>nodes_to_view</h3>
      <p>
        Add some nodes to a view.  The view is specified via the 'view' parameter.
        The nodes, along with their x- and y-coordinates, are specified via
        paramters 'node1', 'x1', 'y1', 'node2', 'x2', 'y2', etc., just like in the
        <a href='#apicmd_maketemplate'>maketemplate</a> command.  Note, if any of the
        indicated nodes are already in the view, they will be ignored (in particular
        the command will not override their existing x-y-coordinates).
        <blockquote>
          Example: http://localhost:5052/nodes_to_view/?view=5&node1=5000&x1=0&y1=3&node2=5001&x2=6&y2=90
        </blockquote>
      </p>

      <h3 id='nodes_from_view'>nodes_from_view</h3>
      <p>
        Remove some nodes from a view.  The view is specified with the 'view'
        parameter.  The nodes are specified with the 'nodes' parameter, in the
        form of a comma-separated list.  Note, any nodes in the list which are
        not in the view, will simply be ignored, so you don't have to worry about
        checking whether the nodes are already in the view, before sending the
        command.
        <blockquote>
          Example: http://localhost:5052/nodes_from_view/?view=5&nodes=5000,5001
        </blockquote>
      </p>

      <h3 id='apicmd_lyphs_from_view'>lyphs_from_view</h3>
      <p>
        Remove some lyphs from a view.  The view is specified with the 'view'
        parameter.  The lyphs are specified with the 'lyphs' parameter, in the
        form of a comma-separated list.  Note, any lyphs in the list which are
        not in the view, will simply be ignored, so you don't have to worry about
        checking whether the nodes are already in the view, before sending the
        command.
        <blockquote>
          Example: http://localhost:5052/lyphs_from_view/?view=10&lyphs=6039,6040
        </blockquote>
      </p>

      <h3 id='apicmd_lyphs_to_view'>lyphs_to_view</h3>
      <p>
        Add some lyphs (rectangles) to a view.  The view is indicated with the
        'view' parameter.  The lyphs are indicated using the same syntax as the
        <a href='#apicmd_makeview'>makeview</a> command.  Note that any lyphs that
        are already present in the view, will be ignored (in particular, their
        existing coordinates/length/width will *not* be overwritten).
        <blockquote>
          Example: http://localhost:5052/lyphs_to_view/?view=50&lyph1=6039&lx1=5&ly1=6&width1=10&height1=20
        </blockquote>
        Note: template IDs can be used in place of lyph IDs.  In that case, the system
        will search for a lyph with that template, and use that.  If no such lyph exists,
        one will be created.  lyphs_to_view can also take an optional 'species' parameter.
        If supplied, and if a lyph is created for a given template, the lyph will have the
        indicated species set.
      </p>

      <h3 id='apicmd_subtemplates'>subtemplates</h3>
      <p>Temporarily disabled due to change in layers structure.</p>
      <p>
        List the subtemplates of the indicated template.
        <ul>
          <li>Mandatory argument: template: which template to view the subtemplates of.
          <li>Optional argument: direct: ('yes' or 'no') whether to restrict to only show *direct* subtemplates (default: 'no').
        </ul>
        <blockquote>
          Example: http://localhost:5052/subtemplates/?template=TEMPLATE_5&direct=yes
        </blockquote>
      </p>

      <h3 id='apicmd_instances_of'>instances_of</h3>
      <p>Temporarily disabled due to change of layer structure.</p>
      <p>
        Given a lyph template, say X, this command finds all lyphs L such that L
        has a template Y such that Y is a subtemplate of (or equal to) X.
        <ul>
          <li>Argument: template: the ID of the template X described above.</li>
        </ul>
        <blockquote>
          Example: http://localhost:5052/instances_of/?template=TEMPLATE_1
        </blockquote>
      </p>

      <h3 id='apicmd_involves_template'>involves_template</h3>
      <p>
        Given a lyph template, say X, this command finds all lyphs L such that L
        has a template Y such that Y 'involves' X as a part.  This is defined
        recursively:
        <ol>
          <li>If Y=X, then Y involves X as a part.</li>
          <li>If Y has layers with materials Y1,...,Yn, then Y involves X as a part if any of Y1,...,Yn involve X as a part.</li>
        </ol>
        <ul>
          <li>Argument: template: the template X as described above.</li>
        </ul>
        <blockquote>
          Example: http://localhost:5052/involves_template/?template=TEMPLATE_1
        </blockquote>
      </p>

      <h3 id='apicmd_has_template'>has_template</h3>
      <p>
        Find all lyphs that have exactly the indicated template.
        <ul>
          <li>Argument: template: the command will search for all lyphs having this template.</li>
        </ul>
        <blockquote>
          Example: http://localhost:5052/has_template/TEMPLATE_1
        </blockquote>
      </p>

      <h3 id='apicmd_has_clinical_index'>has_clinical_index</h3>
      <p>
        Find all lyphs that have (all|at least one of) the indicates clinical (index|indices).
        <ul>
          <li>Argument: indices: a comma-separated list of clinical indices.</li>
          <li>Argument: type: either union or intersection (default: union).</li>
        </ul>
        If 'type' is 'union', the command will find all lyphs which have at least one of the indicated clinical indices.
        If 'type' is 'intersection', the command will find all lyphs which have all of the indicated indices.
        (Note: To give a lyph a clinical index, use the 'annotate' command with the clinical index as the annotation.)
        <blockquote>
          Note about location:  in this command's output, there is a field 'house' added to the JSON for each lyph.
          What the command does is, for a given lyph L, is it looks at all the lyphs which are being
          output, and among those, finds the smallest one (if any) in which L is located.
          For example, if Lyph1 is located in Lyph2 is located in Lyph3, and if Lyph1 and Lyph3 have
          clinical index X, but Lyph2 does not have that clinical index, then, when you search
          for lyphs with clinical index X, in the output, Lyph1 will have Lyph3 as its house.
        </blockquote>
      </p>

      <h3 id='apicmd_unused_indices'>unused_indices</h3>
      <p>
        Outputs a list of all unused clinical indices.  (A clinical index is 'unused'
        if no lyph has been 'annotate'd with its index.)
      </p>

      <h3 id='apicmd_all_templates'>all_templates</h3>
      <p>(Temporary command during development only) View all templates</p>

      <h3 id='apicmd_all_lyphnodes'>all_lyphnodes</h3>
      <p>(Temporary command during development only) View all lyphnodes</p>

      <h3 id='apicmd_all_lyphedges'>all_lyphs</h3>
      <p>(Temporary command during development only) View all lyphs</p>

      <h3 id='apicmd_all_lyphviews'>all_lyphviews</h3>
      <p>(Temporary command during development only) View all lyphviews</p>

      <h3 id='apicmd_all_ont_terms'>all_ont_terms</h3>
      <p>(Temporary command during development only) View all ontology terms</p>

      <h3 id='apicmd_all_pubmeds'>all_pubmeds</h3>
      <p>(Temporary command during development only) View all pubmed entries</p>

      <h3 id='apicmd_all_clinical_indices'>all_clinical_indices</h3>
      <p>(Temporary command during development only) View all clinical indices</p>

      <h3 id='apicmd_template_hierarchy'>template_hierarchy</h3>
      <p>Temporarily disabled due to change in layer structure</p>
      <p>(Temporary command during development only) View the template hierarchy</p>

      <h3 id='apicmd_reset_db'>reset_db</h3>
      <p>
        (Temporary command during development only) Reset (part of) the database (based on given arguments).
        <ul>
          <li>Optional argument: views: if set to 'yes', the command will delete all lyphviews in the database.</li>
          <li>Optional argument: templates: if set to 'yes', the command will delete all templates in the database.</li>
          <li>Optional argument: graph: if set to 'yes', the command will reset the graph to the original graph provided by Dr. de Bono.</li>
        </ul>
      </p>

    </div> <!-- divid -->
  </div> <!-- twelve columns -->

  <div class='four columns'>
    <h3>Quick Nav</h3>
    <hr>
    <ul>
      <li>&raquo; <a href='#about'>About</a></li>
      <li>
        &raquo; <a href='#api'>API</a>
        <ul>
          <li>&raquo; <a href='#apicmd_template'>template</a></li>
          <li>&raquo; <a href='#apicmd_layer'>layer</a></li>
          <li>&raquo; <a href='#apicmd_lyph'>lyph</a></li>
          <li>&raquo; <a href='#apicmd_lyphnode'>lyphnode</a></li>
          <li>&raquo; <a href='#apicmd_pubmed'>pubmed</a></li>
          <li>&raquo; <a href='#apicmd_clinical_index'>clinical_index</a></li>
          <li>&raquo; <a href='#apicmd_lyphpath'>lyphpath</a></li>
          <li>&raquo; <a href='#apicmd_assign_template'>assign_template</a></li>
          <li>&raquo; <a href='#apicmd_template_along_path'>template_along_path</a></li>
          <li>&raquo; <a href='#apicmd_constrain_along_path'>constrain_along_path</a></li>
          <li>&raquo; <a href='#apicmd_lyphview'>lyphview</a></li>
          <li>&raquo; <a href='#apicmd_makelayer'>makelayer</a></li>
          <li>&raquo; <a href='#apicmd_maketemplate'>maketemplate</a></li>
          <li>&raquo; <a href='#apicmd_makeview'>makeview</a></li>
          <li>&raquo; <a href='#apicmd_makelyphnode'>makelyphnode</a></li>
          <li>&raquo; <a href='#apicmd_makelyph'>makelyph</a></li>
          <li>&raquo; <a href='#apicmd_make_pubmed'>make_pubmed</a></li>
          <li>&raquo; <a href='#apicmd_make_clinical_index'>make_clinical_index</a></li>
          <li>&raquo; <a href='#apicmd_annotate'>annotate</a></li>
          <li>&raquo; <a href='#apicmd_remove_annotations'>remove_annotations</a></li>
          <li>&raquo; <a href='#apicmd_editlyph'>editlyph</a></li>
          <li>&raquo; <a href='#apicmd_editlyphnode'>editlyphnode</a></li>
          <li>&raquo; <a href='#apicmd_edit_template'>edit_template</a></li>
          <li>&raquo; <a href='#apicmd_editview'>editview</a></li>
          <li>&raquo; <a href='#apicmd_editlayer'>editlayer</a></li>
          <li>&raquo; <a href='#apicmd_edit_pubmed'>edit_pubmed</a></li>
          <li>&raquo; <a href='#apicmd_edit_clinical_index'>edit_clinical_index</a></li>
          <li>&raquo; <a href='#apicmd_lyphconstrain'>lyphconstrain</a></li>
          <li>&raquo; <a href='#apicmd_delete_lyphs'>delete_lyphs</a></li>
          <li>&raquo; <a href='#apicmd_delete_nodes'>delete_nodes</a></li>
          <li>&raquo; <a href='#apicmd_delete_templates'>delete_templates</a></li>
          <li>&raquo; <a href='#apicmd_delete_views'>delete_views</a></li>
          <li>&raquo; <a href='#apicmd_delete_layers'>delete_layers</a></li>
          <li>&raquo; <a href='#apicmd_nodes_to_view'>nodes_to_view</a></li>
          <li>&raquo; <a href='#apicmd_nodes_from_view'>nodes_from_view</a></li>
          <li>&raquo; <a href='#apicmd_lyphs_to_view'>lyphs_to_view</a></li>
          <li>&raquo; <a href='#apicmd_lyphs_from_view'>lyphs_from_view</a></li>
          <li>&raquo; <a href='#apicmd_subtemplates'>subtemplates</a></li>
          <li>&raquo; <a href='#apicmd_instances_of'>instances_of</a></li>
          <li>&raquo; <a href='#apicmd_involves_template'>involves_template</a></li>
          <li>&raquo; <a href='#apicmd_has_template'>has_template</a></li>
          <li>&raquo; <a href='#apicmd_has_clinical_index'>has_clinical_index</a></li>
          <li>&raquo; <a href='#apicmd_unused_indices'>unused_indices</a></li>
        </ul>
      </li>
      <li>
        &raquo; Dev-only commands
        <ul>
          <li>&raquo; <a href='#apicmd_all_templates'>all_templates</a></li>
          <li>&raquo; <a href='#apicmd_all_lyphnodes'>all_lyphnodes</a></li>
          <li>&raquo; <a href='#apicmd_all_lyphs'>all_lyphs</a></li>
          <li>&raquo; <a href='#apicmd_all_lyphviews'>all_lyphviews</a></li>
          <li>&raquo; <a href='#apicmd_all_ont_terms'>all_ont_terms</a></li>
          <li>&raquo; <a href='#apicmd_all_pubmeds'>all_pubmeds</a></li>
          <li>&raquo; <a href='#apicmd_all_clinical_indices'>all_clinical_indices</a></li>
          <li>&raquo; <a href='#apicmd_template_hierarchy'>template_hierarchy</a></li>
          <li>&raquo; <a href='#apicmd_reset_db'>reset_db</a></li>
        </ul>
      </li>
    </ul>
  </div>  <!-- four columns -->

  <div class='sixteen columns'>
    <hr>
    <ul>
      <li>&raquo; <a href='#topdiv'>Back to top</a></li>
      <li>&raquo; <a href='http://open-physiology.org'>Open Physiology</a></li>
    </ul>
  </div>

</div>

</body>
</html>
